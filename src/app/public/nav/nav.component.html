<header class="nav" role="banner">
  <div class="nav__inner">
    
    <!-- BRAND LOGO (sinistra) -->
    <a class="nav__brand" [routerLink]="['/home']" aria-label="DoubleClutch â€“ Home">
      <img src="https://i.ibb.co/mVN2hJn8/db.png" alt="DoubleClutch" class="nav__logo" />
      <span>DoubleClutch</span>
    </a>

    <!-- LINKS CENTRALI -->
    <nav class="nav__links" [class.is-open]="open" aria-label="Primary">
      <a routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Home</a>
      <a routerLink="/products" routerLinkActive="active">Catalog</a>

      <!-- DROPDOWN GENRES -->
      <div class="dropdown" #genresRef>
        <button type="button" class="btn btn--pill"
                (click)="toggleDropdown($event)"
                [attr.aria-expanded]="dropdown"
                aria-haspopup="true" aria-controls="genres-menu">
          Genres
        </button>
        <ul id="genres-menu" class="dropdown__menu" [class.is-open]="dropdown" (click)="$event.stopPropagation()">
          <li *ngFor="let genre of genres">
            <a class="dropdown__item" [routerLink]="['/genre', genre]" (click)="close()">{{ genre }}</a>
          </li>
        </ul>
      </div>

      <a routerLink="/cart" routerLinkActive="active">Cart</a>
    </nav>

    <!-- SEARCH + LOGIN ICON (destra estrema) -->
    <div class="nav__actions">
      <!-- Barra di ricerca -->
      <form class="nav__search" role="search" (submit)="$event.preventDefault()">
        <app-search></app-search>
      </form>

      <!-- Icona profilo/login -->
      <a *ngIf="token; else guest" class="nav__icon-btn" routerLink="/profile" routerLinkActive="active" aria-label="Profile">
        <span class="material-icons" style="font-size:26px;">account_circle</span>
      </a>
      <ng-template #guest>
        <a class="nav__icon-btn" routerLink="/login" routerLinkActive="active" aria-label="Login">
          <span class="material-icons" style="font-size:26px;">account_circle</span>
        </a>
      </ng-template>

      <!-- Hamburger menu mobile -->
      <button class="hamburger" type="button" (click)="toggle()" [attr.aria-expanded]="open" aria-label="Menu">
        <span></span><span></span><span></span>
      </button>
    </div>
  </div>
</header>